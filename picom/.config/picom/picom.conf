#################################
#          PICOM CONFIG         #
#     Night Owl Theme         #
#################################

#################################
#           Shadows             #
#################################

shadow = true;
shadow-radius = 12;
shadow-opacity = 0.75;
shadow-offset-x = -12;
shadow-offset-y = -12;

# Cor das sombras (Tokyo Night)
shadow-color = "#000000"

# Exclude de sombras
shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Conky'",
  "class_g ?= 'Notify-osd'",
  "class_g = 'Cairo-clock'",
  "class_g = 'slop'",
  "class_g = 'Polybar'",
  "class_g = 'Rofi'",
  "class_g = 'Code'",
  "class_g = 'code-oss'",
  "class_g = 'VSCodium'",
  "_GTK_FRAME_EXTENTS@:c",
  "_NET_WM_STATE@:32a *= '_NET_WM_STATE_HIDDEN'"
];

#################################
#           Fading              #
#################################

fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;

# Não fazer fade em janelas específicas
fade-exclude = [
  "class_g = 'slop'"
];

# Não fazer fade ao abrir/fechar
no-fading-openclose = false;

#################################
#          Transparency         #
#################################

active-opacity = 1.0;
inactive-opacity = 0.95;
frame-opacity = 1.0;

# Não sobrescrever opacity das janelas
inactive-opacity-override = true;

# Regras de opacidade por aplicativo
opacity-rule = [
  "100:class_g = 'firefox'",
  "100:class_g = 'google-chrome'",
  "100:class_g = 'discord'",
  "100:class_g = 'Spotify'",
  "98:class_g = 'Alacritty' && focused",
  "100:class_g = 'Alacritty' && !focused",
  "95:class_g = 'kitty' && focused",
  "90:class_g = 'kitty' && !focused",
  "95:class_g = 'code-oss' && focused",
  "90:class_g = 'code-oss' && !focused",
  "95:class_g = 'Code' && focused",
  "90:class_g = 'Code' && !focused",
  "100:class_g = 'Rofi'",
  "95:class_g = 'Thunar'",
  "100:class_g = 'mpv'",
  "100:class_g = 'vlc'",
  "95:class_g = 'Pavucontrol'",
  "100:fullscreen"
];

# Focus exclude
focus-exclude = [
  "class_g = 'Cairo-clock'",
  "class_g = 'slop'"
];

#################################
#      Rounded Corners          #
#################################

corner-radius = 8;

# Exclude para cantos arredondados
rounded-corners-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'Polybar'",
  "class_g = 'Rofi'",
  "fullscreen"
];

#################################
#      Background Blur          #
#################################

blur-method = "dual_kawase";
blur-strength = 6;
blur-background = true;
blur-background-frame = true;
blur-background-fixed = false;

# Blur exclude
blur-background-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'slop'",
  "class_g = 'firefox' && argb",
  "class_g = 'Code'",
  "class_g = 'code-oss'",
  "class_g = 'VSCodium'",
  "_GTK_FRAME_EXTENTS@:c"
];

#################################
#       General Settings        #
#################################

# Backend
backend = "glx";

# VSync
vsync = false;

# Usar damage information para melhor performance
use-damage = true;

# Detectar janelas arredondadas
detect-rounded-corners = true;

# Detectar cliente opacity
detect-client-opacity = true;

# Detectar transient windows
detect-transient = true;

# GLX backend optimizations
glx-no-stencil = true;
glx-no-rebind-pixmap = true;

# Marcar janelas WM como focadas
mark-wmwin-focused = true;
mark-ovredir-focused = true;

# Usar EWMH para detectar janela focada
use-ewmh-active-win = true;

# Dithering (reduz banding em gradientes)
dithered-present = false;

#################################
#          Animations           #
#################################

# Transições suaves
transition-length = 300;
transition-pow-x = 0.5;
transition-pow-y = 0.5;
transition-pow-w = 0.5;
transition-pow-h = 0.5;
size-transition = true;

# Animações por tipo de janela
animation-for-open-window = "zoom";
animation-for-unmap-window = "zoom";
animation-for-menu-window = "slide-down";
animation-for-transient-window = "slide-down";

#################################
#     Window Type Settings      #
#################################

wintypes:
{
  tooltip = {
    fade = true;
    shadow = false;
    opacity = 0.95;
    focus = true;
    full-shadow = false;
  };
  
  dock = {
    shadow = false;
    clip-shadow-above = true;
    opacity = 1.0;
  };
  
  dnd = {
    shadow = false;
  };
  
  popup_menu = {
    opacity = 0.95;
    shadow = true;
    fade = true;
  };
  
  dropdown_menu = {
    opacity = 0.95;
    shadow = true;
    fade = true;
  };
  
  utility = {
    shadow = true;
    opacity = 0.95;
  };
  
  notification = {
    shadow = true;
    fade = true;
    opacity = 0.95;
  };
  
  desktop = {
    shadow = false;
    blur-background = false;
  };
  
  menu = {
    shadow = true;
    fade = true;
    opacity = 0.95;
  };
  
  dialog = {
    shadow = true;
    opacity = 1.0;
  };
};

#################################
#           Logging             #
#################################

log-level = "warn";
log-file = "~/.cache/picom.log";

#################################
#       Experimental            #
#################################

# Experimental backends
experimental-backends = true;

# Force all windows to be painted with blending
# force-win-blend = false;

# Transparent clipping
# transparent-clipping = false;

#################################
#      Custom Settings          #
#################################

# Dimming
# inactive-dim = 0.1;
# inactive-dim-fixed = true;

# Max brightness
# max-brightness = 1.0;

# Window shader
# window-shader-fg = "default";

# Rules adicionais
# window-shader-fg-rule = [
#   "my_shader.frag:window_type != 'dock'"
# ];

# vim: ft=conf
# garbagge comment
